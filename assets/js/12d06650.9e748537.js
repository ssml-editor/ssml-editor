"use strict";(globalThis.webpackChunk_ssml_editor_website=globalThis.webpackChunk_ssml_editor_website||[]).push([[6213],{5569(e,r,t){t.r(r),t.d(r,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>s,metadata:()=>n,toc:()=>c});const n=JSON.parse('{"id":"guides/normalizer","title":"Normalize SSML","description":"Sometimes we need to further process the generated SSML structure or validate its syntax\u2014for example, adding fixed attributes or nodes, wrapping the content with ..., or checking whether the root node is a specific element. To achieve this, configure an array of normalizers functions that return the processed SSML structure as an array of strings.","source":"@site/versioned_docs/version-1.0.2/guides/normalizer.md","sourceDirName":"guides","slug":"/guides/normalizer","permalink":"/docs/guides/normalizer","draft":false,"unlisted":false,"editUrl":"https://github.com/ssml-editor/ssml-editor/tree/master/website/versioned_docs/version-1.0.2/guides/normalizer.md","tags":[],"version":"1.0.2","sidebarPosition":4,"frontMatter":{"sidebar_position":4},"sidebar":"tutorialSidebar","previous":{"title":"Generate SSML","permalink":"/docs/guides/modules/serializer"},"next":{"title":"Toolbar","permalink":"/docs/guides/toolbar"}}');var i=t(6259),o=t(3230);t(7550),t(9494),t(935);const s={sidebar_position:4},a="Normalize SSML",l={},c=[{value:"Normalizer Type",id:"normalizer-type",level:2},{value:"Define Normalizer",id:"define-normalizer",level:2},{value:"Use Normalizers",id:"use-normalizers",level:2}];function d(e){const r={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,o.R)(),...e.components},{Details:t}=r;return t||function(e,r){throw new Error("Expected "+(r?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.header,{children:(0,i.jsx)(r.h1,{id:"normalize-ssml",children:"Normalize SSML"})}),"\n",(0,i.jsxs)(r.p,{children:["Sometimes we need to further process the generated SSML structure or validate its syntax\u2014for example, adding fixed attributes or nodes, wrapping the content with ",(0,i.jsx)(r.code,{children:"<xml>...</xml>"}),", or checking whether the root node is a specific element. To achieve this, configure an array of ",(0,i.jsx)(r.code,{children:"normalizers"})," functions that return the processed SSML structure as an array of strings."]}),"\n",(0,i.jsx)(r.h2,{id:"normalizer-type",children:"Normalizer Type"}),"\n",(0,i.jsxs)(r.p,{children:["A normalizer is a ",(0,i.jsx)(r.code,{children:"Function"})," that takes an instance inheriting from ",(0,i.jsx)(r.code,{children:"Array<string>"})," as its argument and returns the same instance. Its definition is as follows:"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-ts",metastring:'showLineNumbers title="vue\\src\\type\\editor-normalization.ts"',children:"export type EditorNormalization = (codes: string[]) => string[];\n"})}),"\n",(0,i.jsx)(r.h2,{id:"define-normalizer",children:"Define Normalizer"}),"\n",(0,i.jsxs)(t,{children:[(0,i.jsx)("summary",{children:"View the full example"}),(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-ts",metastring:'showLineNumbers title="editor-vue\\src\\cosy-voice\\normalizer\\speak\\speak-normalizer.ts"',children:"import type { EditorNormalization } from '@ssml-editor/vue';\n\nexport const SpeakNormalizer: EditorNormalization = (\n  codes: string[],\n): string[] => {\n  for (const code of codes) {\n    if (!code.startsWith('<speak')) {\n      throw new Error('\u5b58\u5728\u672a\u8bbe\u7f6e\u5c5e\u6027\u7684\u6bb5\u843d');\n    }\n  }\n  return codes;\n};\n"})})]}),"\n",(0,i.jsx)(r.h2,{id:"use-normalizers",children:"Use Normalizers"}),"\n",(0,i.jsxs)(r.p,{children:["Pass normalizers via the ",(0,i.jsx)(r.code,{children:"normalizers"})," property in the ",(0,i.jsx)(r.a,{href:"https://github.com/ssml-editor/ssml-editor/blob/master/example/src/config.ts",children:"configuration"})," object:"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-ts",metastring:'showLineNumbers title="example\\src\\config.ts"',children:"import {\n  SpeakNormalizer,\n  type EditorConfig,\n} from '@ssml-editor/editor-vue';\n\nexport default <EditorConfig>{\n  ...\n  normalizers: [SpeakNormalizer],\n  ...\n};\n"})})]})}function h(e={}){const{wrapper:r}={...(0,o.R)(),...e.components};return r?(0,i.jsx)(r,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},7550(e,r,t){t.d(r,{A:()=>d});var n=t(4756),i=t(3581),o=t(1299);const s="apiTable_e8hp";var a=t(6259);function l({name:e,children:r},t){const s=function(e){let r=e;for(;(0,o.isValidElement)(r);)[r]=o.Children.toArray(r.props.children);if("string"!=typeof r)throw new Error(`Could not extract APITable row name from JSX tree:\n${JSON.stringify(e,null,2)}`);return r}(r),l=e?`${e}-${s}`:s,c=`#${l}`,d=(0,n.W6)();return(0,i.A)().collectAnchor(l),(0,a.jsx)("tr",{id:l,tabIndex:0,ref:d.location.hash===c?t:void 0,onClick:e=>{const r="TD"===e.target.tagName.toUpperCase(),t=!!window.getSelection()?.toString();r&&!t&&d.push(c)},onKeyDown:e=>{"Enter"===e.key&&d.push(c)},children:r.props.children})}const c=o.forwardRef(l);function d({children:e,name:r}){if("table"!==e.type)throw new Error("Bad usage of APITable component.\nIt is probably that your Markdown table is malformed.\nMake sure to double-check you have the appropriate number of columns for each table row.");const[t,n]=o.Children.toArray(e.props.children),i=(0,o.useRef)(null);(0,o.useEffect)(()=>{i.current?.focus()},[i]);const l=o.Children.map(n.props.children,e=>(0,a.jsx)(c,{name:r,ref:i,children:e}));return(0,a.jsxs)("table",{className:s,children:[t,(0,a.jsx)("tbody",{children:l})]})}},9494(e,r,t){t.d(r,{A:()=>a});var n=t(4757),i=t(7017),o=t(6844),s=t(6259);function a({children:e}){return(0,s.jsx)(o.A,{color:"#ffffff",placement:"bottom",trigger:"click",title:e,styles:{root:{maxWidth:"max-content"}},children:(0,s.jsx)(i.Ay,{type:"text",icon:(0,s.jsx)(n.A,{})})})}},935(e,r,t){t.d(r,{A:()=>i});var n=t(6259);function i({children:e,inline:r=!0}){const t=r?"span":"div";return(0,n.jsx)(t,{style:{whiteSpace:"nowrap"},children:e})}}}]);